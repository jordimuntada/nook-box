<!DOCTYPE html>
<html lang="en">
<head>
    <base target="_self">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-order Nook - Available December 2025 | Digital Wellness for Families</title>
    <meta name="description" content="Pre-order your Nook wooden phone storage box. Available December 2025, just in time for Christmas. Choose from Oak, Walnut, or Bamboo editions.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="translations.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'oak': '#A67B5B',
                        'walnut': '#5C4B37',
                        'bamboo': '#E8D0A9',
                        'natural': '#F8F6F2',
                        'cork': '#D6B87A',
                        'felt': '#7D8CA3'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .christmas-gradient {
            background: linear-gradient(135deg, #dc2626 0%, #ea580c 50%, #dc2626 100%);
        }
    </style>
</head>
<body class="font-sans text-gray-700 bg-natural min-h-screen">
    <!-- Navigation -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="/" class="text-2xl font-semibold text-walnut">Nook</a>
                <div class="hidden md:flex space-x-8">
                    <a href="/#features" class="text-gray-600 hover:text-walnut transition-colors" data-i18n="nav_features">Features</a>
                    <a href="/#lifestyle" class="text-gray-600 hover:text-walnut transition-colors" data-i18n="nav_lifestyle">Lifestyle</a>
                    <a href="/#pricing" class="text-gray-600 hover:text-walnut transition-colors" data-i18n="nav_pricing">Pricing</a>
                    <a href="/#contact" class="text-gray-600 hover:text-walnut transition-colors" data-i18n="nav_contact">Contact</a>
                </div>
                <div class="hidden md:flex items-center space-x-4">
                    <select id="language-selector" class="bg-gray-100 text-gray-700 px-3 py-1 rounded-md text-sm">
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                        <option value="pt">Português</option>
                        <option value="it">Italiano</option>
                        <option value="nl">Nederlands</option>
                        <option value="da">Dansk</option>
                        <option value="ca">Català</option>
                    </select>
                    <a href="/preorder" class="bg-walnut text-white px-6 py-2 rounded-full hover:bg-oak transition-colors" data-i18n="preorder_now">
                        Pre-order Now
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="relative bg-white py-16">
        <div class="container mx-auto px-6">
            <div class="text-center max-w-4xl mx-auto">
                <div class="inline-flex items-center bg-red-50 text-red-700 px-4 py-2 rounded-full text-sm font-medium mb-6 animate-on-scroll">
                    <i class="fas fa-gift mr-2"></i>
                    <span data-i18n="preorder_badge">Available December 2025 - Perfect for Christmas</span>
                </div>
                <h1 class="text-4xl md:text-6xl font-bold text-gray-800 mb-6 animate-on-scroll" data-i18n="preorder_title">Pre-order Your Nook</h1>
                <p class="text-xl text-gray-600 mb-8 animate-on-scroll" data-i18n="preorder_subtitle">Secure your handcrafted wooden phone storage box today. Limited quantities available for December 2025 delivery, just in time for the holidays.</p>
                <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4 animate-on-scroll">
                    <a href="#products" class="bg-walnut text-white px-8 py-4 rounded-full hover:bg-oak transition-colors transform hover:scale-105" data-i18n="choose_your_nook">
                        Choose Your Nook
                    </a>
                    <a href="#timeline" class="border border-walnut text-walnut px-8 py-4 rounded-full hover:bg-walnut hover:text-white transition-colors" data-i18n="delivery_timeline">
                        Delivery Timeline
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Christmas Countdown -->
    <section class="bg-gradient-to-r from-red-600 to-orange-600 py-12 text-white">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-2xl md:text-3xl font-bold mb-6" data-i18n="countdown_title">Countdown to Christmas Delivery</h2>
            <div class="flex justify-center space-x-8 animate-pulse-slow">
                <div class="text-center">
                    <div class="text-3xl md:text-4xl font-bold" id="days">--</div>
                    <div class="text-sm" data-i18n="days">Days</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl md:text-4xl font-bold" id="hours">--</div>
                    <div class="text-sm" data-i18n="hours">Hours</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl md:text-4xl font-bold" id="minutes">--</div>
                    <div class="text-sm" data-i18n="minutes">Minutes</div>
                </div>
            </div>
            <p class="mt-4 text-lg opacity-90" data-i18n="countdown_subtitle">Until December 1st, 2025 - First batch ships!</p>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="bg-white py-20">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 animate-on-scroll">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6" data-i18n="choose_edition">Choose Your Edition</h2>
                <p class="text-xl text-gray-600" data-i18n="edition_subtitle">Each Nook is handcrafted with care and will be ready for December 2025 delivery</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                <!-- Oak Edition -->
                <div class="bg-natural rounded-xl p-8 text-center shadow-sm hover:shadow-md transition-shadow animate-on-scroll border-2 border-transparent hover:border-oak">
                    <div class="w-24 h-24 bg-oak rounded-full mx-auto mb-6 flex items-center justify-center">
                        <i class="fas fa-tree text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" data-i18n="oak_edition">Oak Edition</h3>
                    <p class="text-gray-600 mb-6" data-i18n="oak_description">Warm, classic European oak with natural grain patterns</p>
                    <div class="text-3xl font-bold text-walnut mb-2">€89</div>
                    <div class="text-sm text-gray-600 mb-2" data-i18n="deposit_amount">Deposit: €8.90 (10%)</div>
                    <div class="text-sm text-gray-500 mb-6" data-i18n="remaining_amount">Remaining: €80.10 (Dec 2025)</div>
                    <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm mb-6" data-i18n="preorder_available">Pre-order Available</div>
                    <button class="w-full bg-oak text-white py-3 rounded-full hover:bg-walnut transition-colors" onclick="preorderProduct('oak')" data-i18n="preorder_now">
                        Pre-order Now
                    </button>
                </div>

                <!-- Walnut Edition -->
                <div class="bg-white rounded-xl p-8 text-center shadow-md border-2 border-walnut transform hover:scale-105 transition-transform animate-on-scroll">
                    <div class="w-24 h-24 bg-walnut rounded-full mx-auto mb-6 flex items-center justify-center">
                        <i class="fas fa-leaf text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" data-i18n="walnut_edition">Walnut Edition</h3>
                    <p class="text-gray-600 mb-6" data-i18n="walnut_description">Rich, dark American walnut with deep character</p>
                    <div class="text-3xl font-bold text-walnut mb-2">€99</div>
                    <div class="text-sm text-gray-600 mb-2" data-i18n="deposit_amount">Deposit: €9.90 (10%)</div>
                    <div class="text-sm text-gray-500 mb-6" data-i18n="remaining_amount">Remaining: €89.10 (Dec 2025)</div>
                    <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm mb-6" data-i18n="preorder_available">Pre-order Available</div>
                    <button class="w-full bg-walnut text-white py-3 rounded-full hover:bg-gray-800 transition-colors" onclick="preorderProduct('walnut')" data-i18n="preorder_now">
                        Pre-order Now
                    </button>
                </div>

                <!-- Bamboo Edition -->
                <div class="bg-natural rounded-xl p-8 text-center shadow-sm hover:shadow-md transition-shadow animate-on-scroll border-2 border-transparent hover:border-bamboo">
                    <div class="w-24 h-24 bg-bamboo rounded-full mx-auto mb-6 flex items-center justify-center">
                        <i class="fas fa-seedling text-white text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4" data-i18n="bamboo_edition">Bamboo Edition</h3>
                    <p class="text-gray-600 mb-6" data-i18n="bamboo_description">Light, sustainable bamboo with modern appeal</p>
                    <div class="text-3xl font-bold text-walnut mb-2">€79</div>
                    <div class="text-sm text-gray-600 mb-2" data-i18n="deposit_amount">Deposit: €7.90 (10%)</div>
                    <div class="text-sm text-gray-500 mb-6" data-i18n="remaining_amount">Remaining: €71.10 (Dec 2025)</div>
                    <div class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm mb-6" data-i18n="preorder_available">Pre-order Available</div>
                    <button class="w-full bg-bamboo text-gray-800 py-3 rounded-full hover:bg-oak hover:text-white transition-colors" onclick="preorderProduct('bamboo')" data-i18n="preorder_now">
                        Pre-order Now
                    </button>
                </div>
            </div>

            <div class="text-center mt-12 animate-on-scroll">
                <p class="text-gray-600" data-i18n="pricing_note">All editions include felt lining and magnetic closure. Cork lining available for +€10</p>
            </div>
        </div>
    </section>

    <!-- Timeline Section -->
    <section id="timeline" class="bg-natural py-20">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16 animate-on-scroll">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6" data-i18n="timeline_title">Delivery Timeline</h2>
                <p class="text-xl text-gray-600" data-i18n="timeline_subtitle">Your Nook journey from pre-order to delivery</p>
            </div>

            <div class="max-w-4xl mx-auto">
                <div class="space-y-8">
                    <!-- Step 1 -->
                    <div class="flex items-start space-x-6 animate-on-scroll">
                        <div class="flex-shrink-0 w-12 h-12 bg-walnut rounded-full flex items-center justify-center">
                            <span class="text-white font-bold">1</span>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2" data-i18n="step1_title">Pre-order Today</h3>
                            <p class="text-gray-600" data-i18n="step1_text">Secure your Nook with a pre-order. No payment required until December 1st, 2025.</p>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="flex items-start space-x-6 animate-on-scroll">
                        <div class="flex-shrink-0 w-12 h-12 bg-oak rounded-full flex items-center justify-center">
                            <span class="text-white font-bold">2</span>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2" data-i18n="step2_title">Crafting Begins</h3>
                            <p class="text-gray-600" data-i18n="step2_text">Our master craftsmen begin handcrafting your Nook with sustainable materials and attention to detail.</p>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="flex items-start space-x-6 animate-on-scroll">
                        <div class="flex-shrink-0 w-12 h-12 bg-bamboo rounded-full flex items-center justify-center">
                            <span class="text-white font-bold">3</span>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2" data-i18n="step3_title">Quality Check</h3>
                            <p class="text-gray-600" data-i18n="step3_text">Each Nook undergoes rigorous quality control to ensure it meets our high standards.</p>
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div class="flex items-start space-x-6 animate-on-scroll">
                        <div class="flex-shrink-0 w-12 h-12 bg-red-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-gift text-white"></i>
                        </div>
                        <div class="flex-1">
                            <h3 class="text-xl font-semibold text-gray-800 mb-2" data-i18n="step4_title">December Delivery</h3>
                            <p class="text-gray-600" data-i18n="step4_text">Your Nook arrives in time for Christmas, beautifully packaged and ready to transform your family's digital wellness journey.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

            <!-- Pre-order Form -->
            <section class="bg-white py-20">
                <div class="container mx-auto px-6">
                    <div class="max-w-2xl mx-auto">
                        <div class="text-center mb-12 animate-on-scroll">
                            <h2 class="text-3xl font-bold text-gray-800 mb-6" data-i18n="preorder_form_title">Secure Your Pre-order</h2>
                            <p class="text-xl text-gray-600" data-i18n="preorder_form_subtitle">Pay a 10% deposit today and secure your Nook for December 2025 delivery</p>
                        </div>

                        <form class="space-y-6 animate-on-scroll" id="preorder-form">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="first_name">First Name</label>
                            <input type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none" data-i18n-placeholder="first_name">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="last_name">Last Name</label>
                            <input type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none" data-i18n-placeholder="last_name">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="email">Email Address</label>
                        <input type="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none" data-i18n-placeholder="email">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="edition_preference">Edition Preference</label>
                        <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none">
                            <option value="oak" data-i18n="oak_edition">Oak Edition - €89</option>
                            <option value="walnut" data-i18n="walnut_edition">Walnut Edition - €99</option>
                            <option value="bamboo" data-i18n="bamboo_edition">Bamboo Edition - €79</option>
                        </select>
                    </div>

                    <div>
                        <label class="flex items-start">
                            <input type="checkbox" required class="mr-3 mt-1">
                            <span class="text-sm text-gray-600">
                                <span data-i18n="terms_agreement">I agree to the terms and conditions and understand that payment will be processed in December 2025. If the product is not delivered by December 31st, 2025, I will receive an automatic full refund.</span>
                                <br>
                                <a href="/terms" target="_blank" class="text-walnut hover:text-oak underline font-medium" data-i18n="read_terms">Read full terms and conditions</a>
                            </span>
                        </label>
                    </div>

                    <button type="submit" class="w-full bg-walnut text-white py-4 rounded-lg hover:bg-oak transition-colors text-lg font-semibold" data-i18n="submit_preorder">
                        Submit Pre-order
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-100 py-12">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Nook</h3>
                    <p class="text-gray-600" data-i18n="footer_description">Beautiful design for meaningful connections</p>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800 mb-4" data-i18n="product">Product</h4>
                    <ul class="space-y-2">
                        <li><a href="/#features" class="text-gray-600 hover:text-walnut" data-i18n="features">Features</a></li>
                        <li><a href="/#pricing" class="text-gray-600 hover:text-walnut" data-i18n="materials">Materials</a></li>
                        <li><a href="/#pricing" class="text-gray-600 hover:text-walnut" data-i18n="pricing">Pricing</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800 mb-4" data-i18n="support">Support</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-600 hover:text-walnut" data-i18n="faq">FAQ</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-walnut" data-i18n="shipping">Shipping</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-walnut" data-i18n="returns">Returns</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-800 mb-4" data-i18n="company">Company</h4>
                    <ul class="space-y-2">
                        <li><a href="/#contact" class="text-gray-600 hover:text-walnut" data-i18n="about">About</a></li>
                        <li><a href="/#contact" class="text-gray-600 hover:text-walnut" data-i18n="contact">Contact</a></li>
                        <li><a href="#" class="text-gray-600 hover:text-walnut" data-i18n="sustainability">Sustainability</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-200 mt-8 pt-8 text-center text-gray-600">
                <p data-i18n="copyright" id="copyright-text">© YEAR Nook. All rights reserved. Handcrafted with care in Europe.</p>
            </div>
        </div>
    </footer>

    <!-- Payment Modal -->
    <div id="payment-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-md w-full p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold text-gray-800" data-i18n="payment_title">Complete Your Pre-order</h3>
                <button onclick="closePaymentModal()" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="mb-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="flex justify-between items-center mb-2">
                        <span data-i18n="selected_edition">Selected Edition:</span>
                        <span id="selected-edition-name" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span data-i18n="full_price">Full Price:</span>
                        <span id="full-price" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span data-i18n="deposit_amount">Deposit (10%):</span>
                        <span id="deposit-amount" class="font-semibold text-walnut"></span>
                    </div>
                    <div class="border-t pt-2">
                        <div class="flex justify-between items-center">
                            <span data-i18n="remaining_amount">Remaining (Dec 2025):</span>
                            <span id="remaining-amount" class="text-gray-600"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="card_number">Card Number</label>
                <input type="text" id="card-number" placeholder="1234 5678 9012 3456" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none">
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="expiry_date">Expiry Date</label>
                    <input type="text" id="expiry-date" placeholder="MM/YY" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="cvv">CVV</label>
                    <input type="text" id="cvv" placeholder="123" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none">
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="cardholder_name">Cardholder Name</label>
                <input type="text" id="cardholder-name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:border-walnut focus:ring-1 focus:ring-walnut outline-none">
            </div>

            <button onclick="processPayment()" class="w-full bg-walnut text-white py-3 rounded-lg hover:bg-oak transition-colors font-semibold" data-i18n="pay_deposit">
                Pay Deposit
            </button>
        </div>
    </div>

    <script>
        // Countdown timer
        function updateCountdown() {
            const targetDate = new Date('December 1, 2025 00:00:00').getTime();
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance > 0) {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

                document.getElementById('days').textContent = days;
                document.getElementById('hours').textContent = hours;
                document.getElementById('minutes').textContent = minutes;
            } else {
                document.getElementById('days').textContent = '0';
                document.getElementById('hours').textContent = '0';
                document.getElementById('minutes').textContent = '0';
            }
        }

        // Update countdown every minute
        updateCountdown();
        setInterval(updateCountdown, 60000);

        // Scroll animation
        document.addEventListener('DOMContentLoaded', function() {
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1
            });

            animatedElements.forEach(element => {
                observer.observe(element);
            });
        });

        // Pre-order form handling
        const preorderForm = document.getElementById('preorder-form');
        if (preorderForm) {
            preorderForm.addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Thank you for your pre-order! We\'ll send you a confirmation email and notify you when your Nook is ready for December 2025 delivery.');
                preorderForm.reset();
            });
        }

        // Pre-order product function
        function preorderProduct(edition) {
            const editionNames = {
                'oak': 'Oak Edition',
                'walnut': 'Walnut Edition',
                'bamboo': 'Bamboo Edition'
            };

            const prices = {
                'oak': 89,
                'walnut': 99,
                'bamboo': 79
            };

            const fullPrice = prices[edition];
            const depositAmount = fullPrice * 0.1;
            const remainingAmount = fullPrice - depositAmount;

            // Update modal with selected edition details
            document.getElementById('selected-edition-name').textContent = editionNames[edition];
            document.getElementById('full-price').textContent = `€${fullPrice}`;
            document.getElementById('deposit-amount').textContent = `€${depositAmount.toFixed(2)}`;
            document.getElementById('remaining-amount').textContent = `€${remainingAmount.toFixed(2)}`;

            // Store selected edition for payment processing
            window.selectedEdition = edition;

            // Show payment modal
            document.getElementById('payment-modal').classList.remove('hidden');
        }

        // Close payment modal
        function closePaymentModal() {
            document.getElementById('payment-modal').classList.add('hidden');
        }

        // Process payment
        async function processPayment() {
            const cardNumber = document.getElementById('card-number').value;
            const expiryDate = document.getElementById('expiry-date').value;
            const cvv = document.getElementById('cvv').value;
            const cardholderName = document.getElementById('cardholder-name').value;

            // Basic validation
            if (!cardNumber || !expiryDate || !cvv || !cardholderName) {
                alert('Please fill in all payment details');
                return;
            }

            // Show loading state
            const payButton = document.querySelector('[onclick="processPayment()"]');
            const originalText = payButton.textContent;
            payButton.textContent = 'Processing...';
            payButton.disabled = true;

            try {
                // Get customer info from form
                const customerInfo = {
                    firstName: document.querySelector('input[data-i18n-placeholder="first_name"]').value,
                    lastName: document.querySelector('input[data-i18n-placeholder="last_name"]').value,
                    email: document.querySelector('input[data-i18n-placeholder="email"]').value
                };

                // Create payment intent
                const response = await fetch('/api/create-payment-intent', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        edition: window.selectedEdition,
                        customerInfo: customerInfo
                    })
                });

                const result = await response.json();

                if (result.success) {
                    // Simulate payment processing
                    await new Promise(resolve => setTimeout(resolve, 2000));

                    // Confirm payment
                    const confirmResponse = await fetch('/api/confirm-payment', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            paymentIntentId: result.paymentIntent.id,
                            customerInfo: customerInfo
                        })
                    });

                    const confirmResult = await confirmResponse.json();

                    if (confirmResult.success) {
                        // Show success message
                        alert(`Payment successful! Your pre-order has been confirmed. Order ID: ${confirmResult.orderId}. A confirmation email has been sent to ${confirmResult.confirmationEmail}`);
                        
                        // Close modal and reset form
                        closePaymentModal();
                        document.getElementById('preorder-form').reset();
                    } else {
                        alert('Payment failed. Please try again.');
                    }
                } else {
                    alert('Failed to create payment intent. Please try again.');
                }
            } catch (error) {
                console.error('Payment error:', error);
                alert('Payment failed. Please try again.');
            } finally {
                // Reset button state
                payButton.textContent = originalText;
                payButton.disabled = false;
            }
        }

        // Language switching functionality
        let currentLanguage = 'en';

        function setLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;

            // Update all elements with data-i18n attributes
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // Update all elements with data-i18n-placeholder attributes
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[lang] && translations[lang][key]) {
                    element.placeholder = translations[lang][key];
                }
            });

            // Store language preference
            localStorage.setItem('nook-language', lang);

            // Update copyright year after language change
            updateCopyrightYear();
        }

        // Initialize language selector
        const languageSelector = document.getElementById('language-selector');
        if (languageSelector) {
            // Load saved language preference
            const savedLanguage = localStorage.getItem('nook-language') || 'en';
            languageSelector.value = savedLanguage;
            setLanguage(savedLanguage);

            // Handle language change
            languageSelector.addEventListener('change', function(e) {
                setLanguage(e.target.value);
            });
        }

        // Update copyright year dynamically
        function updateCopyrightYear() {
            const currentYear = new Date().getFullYear();
            const copyrightElement = document.getElementById('copyright-text');
            if (copyrightElement) {
                const currentText = copyrightElement.textContent;
                // Replace "YEAR" placeholder with current year
                const updatedText = currentText.replace('YEAR', currentYear);
                copyrightElement.textContent = updatedText;
            }
        }

        // Update copyright year on page load
        updateCopyrightYear();
    </script>
</body>
</html>